<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>投稿詳細</title>
    <link rel="stylesheet" href="postDetail.css">
</head>
<!-- header  <body>の前に入れる -->
<header>
    <img id="top" src="image.png" width="300" height="100" alt="高校の写真">
    <div id="mng">
        <form>
            <input type="submit" value="学校登録"><!--権限制御の追加がない-->　　　　　　　　　
            <input type="submit" value="ログアウト"><!--権限制御の追加がない-->
        </form>
        <form th:action="@{/schools/}" th:object="${school_name}" th:method="post">
            <span>
                <label for="search_h">高校名で検索</label>
                <input type="text" id="keyword" name="keyword">
                <input type="submit" value="検索">
            </span>
        </form>
    </div>
</header>

<body>
    <div class="school-overview">
        <div class="school-info">
            <div class="mod-school">
                <div class="mod-school-inner">
                    <div class="mod-school-top">
                        <div class="mod-school-one">○○○○高等学校　偏差値： {学校.偏差値}</div>
                        <div class="mod-school-caption">(ふりがな)</div>
                        <div class="school-star">img:★★☆☆☆ {評価値の平均値2.2}
                        </div><!-- <p class="mod-school-info">○○県 / 公立 / 共学</p> -->
                    </div>
                    <div class="mod-school-bottom">
                        <div class="info">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="school-image">
            <img id="top" src="image.png" width="100" height="100" alt="高校の写真">
        </div>
        <div class="overview">
            <h2>概要</h2>
            <p>学校.概要</p>
        </div>
        <div th:each="post : ${posts}">
            <div class="post-info" style="display: flex; align-items: center;">
                <p th:text="${post.postStatus} + ' / '">〇〇生 /</p>
                <p th:text="${post.postYear} + '年入学'">2000年入学</p>
            </div>

            <div class="post-header">
                <div style="display: flex; align-items: center;">
                    <img th:src="${post.postGender == '男' ? '/male.png' : (post.postGender == '女' ? '/female.png' : '/other.png')}"
                        alt="性別アイコン" class="gender-image" />
                </div>
                <h2 th:text="${post.postTitle}">タイトル</h2>

                <!-- 評価アイコンを表示 -->
                <div th:each="item : ${@itemRepository.findByPostId(post.postId)}">
                    <div style="display: flex; align-items: center;">
                        <img th:src="${item.itemTotalScore == 5 ? '/score_5.png' :
                                    item.itemTotalScore == 4 ? '/score_4.png' :
                                    item.itemTotalScore == 3 ? '/score_3.png' :
                                    item.itemTotalScore == 2 ? '/score_2.png' :
                                    '/score_1.png'}" alt="評価アイコン" class="rating-image" />
                        <p th:text="'総合得点: ' + ${item.itemTotalScore}" style="margin-left: 10px;">総合得点</p>
                    </div>
                </div>
            </div>

            <p th:text="'投稿日付: ' + ${post.postDate}">投稿日付: 2000/04</p>

            <div th:each="item : ${@itemRepository.findByPostId(post.postId)}">
                <p
                    th:text="'環境: ' + ${item.itemEnvironmentScore} + ' | 部活動: ' + ${item.itemClubScore} + ' | イベント: ' + ${item.itemEventScore}">
                    [環境:3 | 部活動:3 | イベント:3]</p>

                <h3>総合評価</h3>
                <p th:text="${item.itemTotalComment}">総合評価に関するコメント</p>

                <h3>環境</h3>
                <p th:text="${item.itemEnvironmentComment}">環境に関するコメント</p>

                <h3>部活動</h3>
                <p th:text="${item.itemClubComment}">部活動に関するコメント</p>

                <h3>イベント</h3>
                <p th:text="${item.itemEventComment}">イベントに関するコメント</p>
            </div>
        </div>
        <div style="text-align: right;">
            <form action="/delete" method="POST">
                <button type="submit" class="delete-button">削除</button>
            </form>
        </div>
    </div>
</body>
<footer>
    <form th:action="@{school/add}" th:object="${admin}" th:method="post">
        <label>お問い合わせ：000-0000-00000</label>　　　　　　
        <input type="submit" value="管理者ログイン">
    </form>
</footer>

</html>